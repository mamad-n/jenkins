pipeline{
    agent any
    stages {
        stage ('test') {
            steps {
                echo "hello from stage test station"
                sh "echo salam az test stage > file1"
                sh "mkdir my-folder"
                sh "cd my-folder && tar -cvf myachrive.tar ../file1"
                sh "echo your buil number is : ${env.BUILD_NUMBER}"
                archiveArtifacts artifacts: '**/my-folder/*.tar , file1'
                sh "cd .. && rm -rf my-folder"
            }
        }
        stage ('build') {
            steps {
                echo "hello from stage build station"
                sh "cat file1"
                echo "your buil number is : $currentBuild.number"
            }
        }
        stage ('deploy') {
            steps {
                echo "hello from stage deploy station"
                sh "cat file1"
            }
        }
    }

}
