pipeline{
    agent any
    stages {
        stage ('test') {
            steps {
                echo "hello from stage test station"
                sh "echo salam az test stage ast > file1"
                sh "mkdir my-folder || true "
                sh "cd my-folder && tar -cvf myachrive.tar ../file1"
                sh "wrong-command your buil number is : ${env.BUILD_NUMBER}"
                sh "cd .. && rm -rf my-folder"
            }
        }
        stage ('build') {
            steps {
                echo "hello from stage build station"
                sh "cat file1"
                echo "your buil number is : $currentBuild.number"
            }
        }
        stage ('deploy') {
            steps {
                echo "hello from stage deploy station"
                sh "cat file1"
            }
        }
    }

    post {
    always {
        // One or more steps need to be included within each condition's block.
        steps {
                archiveArtifacts artifacts: 'my-folder/*.tar , file1'
        }
    }
    }
}
